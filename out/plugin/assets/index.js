var v=Object.defineProperty,E=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var h=(e,t,o)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,u=(e,t)=>{for(var o in t||(t={}))w.call(t,o)&&h(e,o,t[o]);if(f)for(var o of f(t))I.call(t,o)&&h(e,o,t[o]);return e},p=(e,t)=>E(e,P(t));import{j as g,r as a,R as x}from"./vendor.js";const L=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}};L();const s=g.exports.jsx,m=g.exports.jsxs,C=({dispatch:e})=>{const[t,o]=a.exports.useState([]);return a.exports.useEffect(()=>{let l="https://region-uppsala.humany.net/metodbok-as/guides"+location.search.replace("category","categories").replace("tag","tags");fetch(l).then(r=>r.json()).then(r=>o(r.Matches))},[o]),s("div",{children:s("ul",{className:"list-none",children:t.map(l=>s("li",{className:"px-4 py-1 cursor-pointer hover:bg-blue-200",onClick:()=>e({type:"startComparing",payload:l.Id}),children:l.Title},l.Id))})})},y={comparing:!1,protocolId:null,protocol:null,loadingProtocol:!1},S=(e,t)=>{switch(t.type){case"startComparing":return p(u({},e),{comparing:!0,loadingProtocol:!0,protocolId:t.payload});case"endComparing":return y;case"setProtocol":return p(u({},e),{protocol:t.payload,loadingProtocol:!1});default:return e}},j=({})=>{const[e,t]=a.exports.useReducer(S,y);return a.exports.useEffect(()=>{e.protocolId&&fetch("https://region-uppsala.humany.net/metodbok-as/guides/"+e.protocolId).then(o=>o.json()).then(o=>{t({type:"setProtocol",payload:o})}).catch(o=>console.log(o))},[e.protocolId]),m("div",{className:"bg-white rounded-md h-full border border-gray-300",children:[s("h2",{className:"text-center mt-3",children:"J\xE4mf\xF6r med"}),!e.comparing&&s(C,{dispatch:t}),e.loadingProtocol&&s("h3",{children:"Laddar..."}),e.comparing&&!e.loadingProtocol&&e.protocol&&m("div",{className:"mx-4 mb-4",children:[s("h2",{children:e.protocol.Title}),s("div",{dangerouslySetInnerHTML:{__html:e.protocol.Body}})]})]})},i=document.createElement("div");i.id="compare-container";i.classList.add("as-preflight","flex-grow","flex-shrink","mr-4");i.style.flexBasis="50%";const N=({children:e})=>(a.exports.useEffect(()=>{const t=document.querySelector(".humany-middle-column");return t&&!document.getElementById("compare-container")&&t.insertAdjacentElement("afterend",i),()=>{i.remove()}},[]),x.createPortal(e,i)),k=({})=>{const[e,t]=a.exports.useState(!1),[o,l]=a.exports.useState(!1),r=n=>{n.preventDefault(),l(c=>!c)};return a.exports.useEffect(()=>{const n=setInterval(()=>{const c=location.pathname,b=new RegExp(/\/metodbok-as\/[^\/]+\/\d{2,6}/).test(c);t(b)},1e3);return()=>clearInterval(n)},[t]),e?m("div",{className:"fixed bottom-5 right-10",children:[s("button",{className:"bg-metodbok text-white rounded-lg shadow px-3 py-1 hover:bg-blue-500 text-lg font-semibold",onClick:r,children:o?"St\xE4ng":"J\xE4mf\xF6r"}),o&&s(N,{children:s(j,{})})]}):s("div",{})};const d=document.createElement("div");d.id="as-plugin";d.classList.add("as-preflight");document.body.append(d);x.render(s(k,{}),d);
